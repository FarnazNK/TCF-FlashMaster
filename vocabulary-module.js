// vocabulary-module.js - TCF French Vocabulary Module

// Export the vocabulary list with categories and pronunciations
export const vocabulary = [
    // Basic vocabulary
    { french: "bonjour", english: "hello", category: "basic", pronunciation: "bohn-zhoor" },
    { french: "merci", english: "thank you", category: "basic", pronunciation: "mehr-see" },
    { french: "s'il vous plaît", english: "please", category: "basic", pronunciation: "seel voo pleh" },
    { french: "au revoir", english: "goodbye", category: "basic", pronunciation: "oh ruh-vwahr" },
    { french: "oui", english: "yes", category: "basic", pronunciation: "wee" },
    { french: "non", english: "no", category: "basic", pronunciation: "nohn" },
    { french: "excusez-moi", english: "excuse me", category: "basic", pronunciation: "ex-koo-zay mwah" },
    { french: "pardon", english: "sorry", category: "basic", pronunciation: "par-dohn" },
    { french: "d'accord", english: "okay", category: "basic", pronunciation: "dah-kohr" },
    { french: "comment ça va", english: "how are you", category: "basic", pronunciation: "koh-mahn sah vah" },
    { french: "enchanté", english: "nice to meet you", category: "basic", pronunciation: "ahn-shahn-tay" },
    { french: "à bientôt", english: "see you soon", category: "basic", pronunciation: "ah bee-yan-toh" },
    { french: "bonsoir", english: "good evening", category: "basic", pronunciation: "bohn-swahr" },
    { french: "bonne nuit", english: "good night", category: "basic", pronunciation: "bun nwee" },
    
    // Daily life
    { french: "maison", english: "house", category: "daily", pronunciation: "meh-zohn" },
    { french: "famille", english: "family", category: "daily", pronunciation: "fah-mee" },
    { french: "cuisine", english: "kitchen", category: "daily", pronunciation: "kwee-zeen" },
    { french: "chambre", english: "bedroom", category: "daily", pronunciation: "shahm-bruh" },
    { french: "salle de bain", english: "bathroom", category: "daily", pronunciation: "sal duh ban" },
    { french: "salon", english: "living room", category: "daily", pronunciation: "sah-lohn" },
    { french: "table", english: "table", category: "daily", pronunciation: "tah-bluh" },
    { french: "chaise", english: "chair", category: "daily", pronunciation: "shehz" },
    { french: "lit", english: "bed", category: "daily", pronunciation: "lee" },
    { french: "fenêtre", english: "window", category: "daily", pronunciation: "fuh-neh-truh" },
    { french: "porte", english: "door", category: "daily", pronunciation: "port" },
    { french: "mur", english: "wall", category: "daily", pronunciation: "moor" },
    { french: "plafond", english: "ceiling", category: "daily", pronunciation: "plah-fohn" },
    { french: "sol", english: "floor", category: "daily", pronunciation: "sohl" },
    { french: "escalier", english: "stairs", category: "daily", pronunciation: "es-kah-lyay" },
    { french: "balcon", english: "balcony", category: "daily", pronunciation: "bal-kohn" },
    { french: "jardin", english: "garden", category: "daily", pronunciation: "zhar-dan" },
    { french: "garage", english: "garage", category: "daily", pronunciation: "gah-rahzh" },
    { french: "grenier", english: "attic", category: "daily", pronunciation: "gruh-nyay" },
    { french: "cave", english: "cellar", category: "daily", pronunciation: "kahv" },
    
    // Food
    { french: "manger", english: "to eat", category: "food", pronunciation: "mahn-zhay" },
    { french: "boire", english: "to drink", category: "food", pronunciation: "bwahr" },
    { french: "eau", english: "water", category: "food", pronunciation: "oh" },
    { french: "pain", english: "bread", category: "food", pronunciation: "pan" },
    { french: "fromage", english: "cheese", category: "food", pronunciation: "froh-mahzh" },
    { french: "vin", english: "wine", category: "food", pronunciation: "van" },
    { french: "café", english: "coffee", category: "food", pronunciation: "kah-fay" },
    { french: "thé", english: "tea", category: "food", pronunciation: "tay" },
    { french: "légume", english: "vegetable", category: "food", pronunciation: "lay-goom" },
    { french: "fruit", english: "fruit", category: "food", pronunciation: "frwee" },
    { french: "viande", english: "meat", category: "food", pronunciation: "vyahnd" },
    { french: "poisson", english: "fish", category: "food", pronunciation: "pwah-sohn" },
    { french: "poulet", english: "chicken", category: "food", pronunciation: "poo-leh" },
    { french: "bœuf", english: "beef", category: "food", pronunciation: "buff" },
    { french: "porc", english: "pork", category: "food", pronunciation: "por" },
    { french: "pomme", english: "apple", category: "food", pronunciation: "pom" },
    { french: "banane", english: "banana", category: "food", pronunciation: "bah-nahn" },
    { french: "orange", english: "orange", category: "food", pronunciation: "oh-rahnzh" },
    { french: "fraise", english: "strawberry", category: "food", pronunciation: "frehz" },
    { french: "raisin", english: "grape", category: "food", pronunciation: "reh-zan" },
    { french: "carotte", english: "carrot", category: "food", pronunciation: "kah-rot" },
    { french: "tomate", english: "tomato", category: "food", pronunciation: "toh-maht" },
    { french: "pomme de terre", english: "potato", category: "food", pronunciation: "pom duh tehr" },
    { french: "oignon", english: "onion", category: "food", pronunciation: "oh-nyohn" },
    { french: "chocolat", english: "chocolate", category: "food", pronunciation: "shoh-koh-lah" },
    { french: "dessert", english: "dessert", category: "food", pronunciation: "deh-sehr" },
    { french: "restaurant", english: "restaurant", category: "food", pronunciation: "reh-stoh-rahn" },
    { french: "menu", english: "menu", category: "food", pronunciation: "muh-noo" },
    { french: "addition", english: "bill", category: "food", pronunciation: "ah-dee-syohn" },
    { french: "réservation", english: "reservation", category: "food", pronunciation: "ray-sehr-vah-syohn" },
    
    // Nature
    { french: "jardin", english: "garden", category: "nature", pronunciation: "zhar-dan" },
    { french: "fleur", english: "flower", category: "nature", pronunciation: "flur" },
    { french: "arbre", english: "tree", category: "nature", pronunciation: "ar-bruh" },
    { french: "ciel", english: "sky", category: "nature", pronunciation: "syel" },
    { french: "soleil", english: "sun", category: "nature", pronunciation: "so-lay" },
    { french: "lune", english: "moon", category: "nature", pronunciation: "loon" },
    { french: "étoile", english: "star", category: "nature", pronunciation: "ay-twal" },
    { french: "mer", english: "sea", category: "nature", pronunciation: "mehr" },
    { french: "montagne", english: "mountain", category: "nature", pronunciation: "mohn-tahn-yuh" },
    { french: "rivière", english: "river", category: "nature", pronunciation: "ree-vyehr" },
    { french: "forêt", english: "forest", category: "nature", pronunciation: "foh-reh" },
    { french: "lac", english: "lake", category: "nature", pronunciation: "lahk" },
    { french: "plage", english: "beach", category: "nature", pronunciation: "plahzh" },
    { french: "océan", english: "ocean", category: "nature", pronunciation: "oh-say-ahn" },
    { french: "cascade", english: "waterfall", category: "nature", pronunciation: "kahs-kahd" },
    { french: "île", english: "island", category: "nature", pronunciation: "eel" },
    { french: "volcan", english: "volcano", category: "nature", pronunciation: "vol-kahn" },
    { french: "désert", english: "desert", category: "nature", pronunciation: "day-zehr" },
    { french: "colline", english: "hill", category: "nature", pronunciation: "koh-leen" },
    { french: "vallée", english: "valley", category: "nature", pronunciation: "vah-lay" },
    { french: "pluie", english: "rain", category: "nature", pronunciation: "ploo-ee" },
    { french: "neige", english: "snow", category: "nature", pronunciation: "nezh" },
    { french: "nuage", english: "cloud", category: "nature", pronunciation: "noo-ahzh" },
    { french: "orage", english: "storm", category: "nature", pronunciation: "oh-rahzh" },
    
    // Travel
    { french: "ville", english: "city", category: "travel", pronunciation: "veel" },
    { french: "village", english: "village", category: "travel", pronunciation: "vee-lazh" },
    { french: "rue", english: "street", category: "travel", pronunciation: "roo" },
    { french: "pont", english: "bridge", category: "travel", pronunciation: "pohn" },
    { french: "magasin", english: "shop", category: "travel", pronunciation: "mah-gah-zan" },
    { french: "marché", english: "market", category: "travel", pronunciation: "mar-shay" },
    { french: "boulangerie", english: "bakery", category: "travel", pronunciation: "boo-lahn-zhuh-ree" },
    { french: "hôpital", english: "hospital", category: "travel", pronunciation: "oh-pee-tal" },
    { french: "hôtel", english: "hotel", category: "travel", pronunciation: "oh-tel" },
    { french: "voyage", english: "journey/trip", category: "travel", pronunciation: "vwah-yazh" },
    { french: "train", english: "train", category: "travel", pronunciation: "tran" },
    { french: "avion", english: "airplane", category: "travel", pronunciation: "ah-vee-ohn" },
    { french: "aéroport", english: "airport", category: "travel", pronunciation: "ah-ay-roh-por" },
    { french: "gare", english: "train station", category: "travel", pronunciation: "gahr" },
    { french: "métro", english: "subway", category: "travel", pronunciation: "may-troh" },
    { french: "bus", english: "bus", category: "travel", pronunciation: "boos" },
    { french: "taxi", english: "taxi", category: "travel", pronunciation: "tak-see" },
    { french: "voiture", english: "car", category: "travel", pronunciation: "vwah-toor" },
    { french: "vélo", english: "bicycle", category: "travel", pronunciation: "vay-loh" },
    { french: "billet", english: "ticket", category: "travel", pronunciation: "bee-yay" },
    { french: "passeport", english: "passport", category: "travel", pronunciation: "pahs-por" },
    { french: "visa", english: "visa", category: "travel", pronunciation: "vee-zah" },
    { french: "douane", english: "customs", category: "travel", pronunciation: "doo-ahn" },
    { french: "frontière", english: "border", category: "travel", pronunciation: "frohn-tyehr" },
    { french: "valise", english: "suitcase", category: "travel", pronunciation: "vah-leez" },
    { french: "itinéraire", english: "itinerary", category: "travel", pronunciation: "ee-tee-nay-rehr" },
    { french: "carte", english: "map", category: "travel", pronunciation: "kahrt" },
    { french: "guide", english: "guide", category: "travel", pronunciation: "geed" },
    { french: "monument", english: "monument", category: "travel", pronunciation: "moh-noo-mahn" },
    { french: "musée", english: "museum", category: "travel", pronunciation: "moo-zay" },
    
    // Work
    { french: "médecin", english: "doctor", category: "work", pronunciation: "mayd-san" },
    { french: "infirmier", english: "nurse", category: "work", pronunciation: "an-feer-myay" },
    { french: "pharmacie", english: "pharmacy", category: "work", pronunciation: "far-mah-see" },
    { french: "professeur", english: "teacher", category: "work", pronunciation: "pro-feh-sur" },
    { french: "étudiant", english: "student", category: "work", pronunciation: "ay-too-dyahn" },
    { french: "avocat", english: "lawyer", category: "work", pronunciation: "ah-voh-kah" },
    { french: "ingénieur", english: "engineer", category: "work", pronunciation: "an-zhay-nyur" },
    { french: "cuisinier", english: "cook", category: "work", pronunciation: "kwee-zee-nyay" },
    { french: "serveur", english: "waiter", category: "work", pronunciation: "sehr-vur" },
    { french: "travail", english: "work", category: "work", pronunciation: "trah-vahy" },
    { french: "bureau", english: "office", category: "work", pronunciation: "boo-roh" },
    { french: "collègue", english: "colleague", category: "work", pronunciation: "koh-leg" },
    { french: "réunion", english: "meeting", category: "work", pronunciation: "ray-oo-nee-ohn" },
    { french: "architecte", english: "architect", category: "work", pronunciation: "ar-shee-tekt" },
    { french: "artiste", english: "artist", category: "work", pronunciation: "ar-teest" },
    { french: "comptable", english: "accountant", category: "work", pronunciation: "kohn-tah-bluh" },
    { french: "dentiste", english: "dentist", category: "work", pronunciation: "dahn-teest" },
    { french: "journaliste", english: "journalist", category: "work", pronunciation: "zhoor-nah-leest" },
    { french: "informaticien", english: "IT specialist", category: "work", pronunciation: "an-for-mah-tee-syan" },
    { french: "chef", english: "boss/chef", category: "work", pronunciation: "shef" },
    { french: "secrétaire", english: "secretary", category: "work", pronunciation: "suh-kray-tehr" },
    { french: "vendeur", english: "salesperson", category: "work", pronunciation: "vahn-dur" },
    { french: "employé", english: "employee", category: "work", pronunciation: "ahm-plwah-yay" },
    { french: "entreprise", english: "company", category: "work", pronunciation: "ahn-truh-preez" },
    { french: "salaire", english: "salary", category: "work", pronunciation: "sah-lehr" },
    { french: "entretien", english: "interview", category: "work", pronunciation: "ahn-truh-tyan" },
    { french: "carrière", english: "career", category: "work", pronunciation: "kah-ryehr" },
    { french: "promotion", english: "promotion", category: "work", pronunciation: "proh-moh-syohn" },
    
    // Intermediate vocabulary
    { french: "écouter", english: "to listen", category: "intermediate", pronunciation: "ay-koo-tay" },
    { french: "parler", english: "to speak", category: "intermediate", pronunciation: "par-lay" },
    { french: "lire", english: "to read", category: "intermediate", pronunciation: "leer" },
    { french: "écrire", english: "to write", category: "intermediate", pronunciation: "ay-kreer" },
    { french: "comprendre", english: "to understand", category: "intermediate", pronunciation: "kom-prahn-druh" },
    { french: "apprendre", english: "to learn", category: "intermediate", pronunciation: "ah-prahn-druh" },
    { french: "jouer", english: "to play", category: "intermediate", pronunciation: "zhoo-ay" },
    { french: "courir", english: "to run", category: "intermediate", pronunciation: "koo-reer" },
    { french: "marcher", english: "to walk", category: "intermediate", pronunciation: "mar-shay" },
    { french: "voyager", english: "to travel", category: "intermediate", pronunciation: "vwah-yah-zhay" },
    { french: "développement", english: "development", category: "intermediate", pronunciation: "day-vuh-lop-mahn" },
    { french: "environnement", english: "environment", category: "intermediate", pronunciation: "ahn-vee-ron-mahn" },
    { french: "technologie", english: "technology", category: "intermediate", pronunciation: "tek-no-lo-zhee" },
    { french: "expérience", english: "experience", category: "intermediate", pronunciation: "ex-pay-ree-ahns" },
    { french: "responsabilité", english: "responsibility", category: "intermediate", pronunciation: "ray-spohn-sah-bee-lee-tay" },
    { french: "acheter", english: "to buy", category: "intermediate", pronunciation: "ah-shuh-tay" },
    { french: "vendre", english: "to sell", category: "intermediate", pronunciation: "vahn-druh" },
    { french: "emprunter", english: "to borrow", category: "intermediate", pronunciation: "ahm-proon-tay" },
    { french: "prêter", english: "to lend", category: "intermediate", pronunciation: "preh-tay" },
    { french: "envoyer", english: "to send", category: "intermediate", pronunciation: "ahn-vwah-yay" },
    { french: "recevoir", english: "to receive", category: "intermediate", pronunciation: "ruh-suh-vwahr" },
    { french: "commencer", english: "to begin", category: "intermediate", pronunciation: "koh-mahn-say" },
    { french: "finir", english: "to finish", category: "intermediate", pronunciation: "fee-neer" },
    { french: "choisir", english: "to choose", category: "intermediate", pronunciation: "shwah-zeer" },
    { french: "décider", english: "to decide", category: "intermediate", pronunciation: "day-see-day" },
    { french: "sentir", english: "to feel", category: "intermediate", pronunciation: "sahn-teer" },
    { french: "penser", english: "to think", category: "intermediate", pronunciation: "pahn-say" },
    { french: "croire", english: "to believe", category: "intermediate", pronunciation: "krwahr" },
    { french: "savoir", english: "to know (fact)", category: "intermediate", pronunciation: "sah-vwahr" },
    { french: "connaître", english: "to know (person/place)", category: "intermediate", pronunciation: "koh-neh-truh" },
    
    // Advanced vocabulary
    { french: "conséquence", english: "consequence", category: "advanced", pronunciation: "kon-say-kahns" },
    { french: "perspective", english: "perspective", category: "advanced", pronunciation: "pehr-spek-teev" },
    { french: "phénomène", english: "phenomenon", category: "advanced", pronunciation: "fay-no-men" },
    { french: "hypothèse", english: "hypothesis", category: "advanced", pronunciation: "ee-po-tez" },
    { french: "paradigme", english: "paradigm", category: "advanced", pronunciation: "pah-rah-digm" },
    { french: "s'inquiéter", english: "to worry", category: "advanced", pronunciation: "san-kyay-tay" },
    { french: "s'ennuyer", english: "to get bored", category: "advanced", pronunciation: "sahn-nwee-yay" },
    { french: "s'intéresser à", english: "to be interested in", category: "advanced", pronunciation: "san-tay-reh-say ah" },
    { french: "s'excuser", english: "to apologize", category: "advanced", pronunciation: "sehk-skoo-zay" },
    { french: "s'amuser", english: "to have fun", category: "advanced", pronunciation: "sah-moo-zay" },
    { french: "contemporain", english: "contemporary", category: "advanced", pronunciation: "kohn-tahm-poh-ran" },
    { french: "néanmoins", english: "nevertheless", category: "advanced", pronunciation: "nay-ahn-mwahn" },
    { french: "effectivement", english: "indeed", category: "advanced", pronunciation: "eh-fek-teev-mahn" },
    { french: "toutefois", english: "however", category: "advanced", pronunciation: "toot-fwah" },
    { french: "auparavant", english: "previously", category: "advanced", pronunciation: "oh-pah-rah-vahn" },
    { french: "dorénavant", english: "from now on", category: "advanced", pronunciation: "doh-ray-nah-vahn" },
    { french: "éventuellement", english: "possibly", category: "advanced", pronunciation: "ay-vahn-too-el-mahn" },
    { french: "simultanément", english: "simultaneously", category: "advanced", pronunciation: "see-mool-tah-nay-mahn" },
    { french: "préalablement", english: "beforehand", category: "advanced", pronunciation: "pray-ah-lah-bluh-mahn" },
    { french: "ultérieurement", english: "later", category: "advanced", pronunciation: "ool-tay-ryur-mahn" },
    { french: "désuet", english: "obsolete", category: "advanced", pronunciation: "day-sweh" },
    { french: "ambiguïté", english: "ambiguity", category: "advanced", pronunciation: "ahm-bee-gwee-tay" },
    { french: "ésotérique", english: "esoteric", category: "advanced", pronunciation: "ay-zoh-tay-reek" },
    { french: "intrinsèque", english: "intrinsic", category: "advanced", pronunciation: "an-tran-sek" },
    { french: "juxtaposer", english: "to juxtapose", category: "advanced", pronunciation: "zhook-stah-poh-zay" },
    { french: "métaphore", english: "metaphor", category: "advanced", pronunciation: "may-tah-for" },
    { french: "nuance", english: "nuance", category: "advanced", pronunciation: "noo-ahns" },
    { french: "paradoxe", english: "paradox", category: "advanced", pronunciation: "pah-rah-doks" },
    { french: "synergie", english: "synergy", category: "advanced", pronunciation: "see-nehr-zhee" },
    { french: "tacite", english: "tacit", category: "advanced", pronunciation: "tah-seet" },
    
    // Emotions
    { french: "heureux", english: "happy", category: "emotions", pronunciation: "uh-ruh" },
    { french: "triste", english: "sad", category: "emotions", pronunciation: "treest" },
    { french: "content", english: "pleased", category: "emotions", pronunciation: "kohn-tahn" },
    { french: "fâché", english: "angry", category: "emotions", pronunciation: "fah-shay" },
    { french: "inquiet", english: "worried", category: "emotions", pronunciation: "an-kyeh" },
    { french: "surpris", english: "surprised", category: "emotions", pronunciation: "soor-pree" },
    { french: "effrayé", english: "scared", category: "emotions", pronunciation: "ef-fray-yay" },
    { french: "déçu", english: "disappointed", category: "emotions", pronunciation: "day-soo" },
    { french: "confus", english: "confused", category: "emotions", pronunciation: "kohn-foo" },
    { french: "enthousiaste", english: "enthusiastic", category: "emotions", pronunciation: "ahn-too-zyast" },
    { french: "reconnaissant", english: "grateful", category: "emotions", pronunciation: "ruh-koh-neh-sahn" },
    { french: "jaloux", english: "jealous", category: "emotions", pronunciation: "zhah-loo" },
    { french: "curieux", english: "curious", category: "emotions", pronunciation: "koo-ryuh" },
    { french: "fier", english: "proud", category: "emotions", pronunciation: "fyehr" },
    { french: "embarrassé", english: "embarrassed", category: "emotions", pronunciation: "ahm-bah-rah-say" },
    
    // Time expressions
    { french: "aujourd'hui", english: "today", category: "time", pronunciation: "oh-zhoor-dwee" },
    { french: "demain", english: "tomorrow", category: "time", pronunciation: "duh-man" },
    { french: "hier", english: "yesterday", category: "time", pronunciation: "yehr" },
    { french: "maintenant", english: "now", category: "time", pronunciation: "man-tuh-nahn" },
    { french: "plus tard", english: "later", category: "time", pronunciation: "ploo tahr" },
    { french: "tôt", english: "early", category: "time", pronunciation: "toh" },
    { french: "tard", english: "late", category: "time", pronunciation: "tahr" },
    { french: "semaine", english: "week", category: "time", pronunciation: "suh-men" },
    { french: "mois", english: "month", category: "time", pronunciation: "mwah" },
    { french: "année", english: "year", category: "time", pronunciation: "ah-nay" },
    { french: "matin", english: "morning", category: "time", pronunciation: "mah-tan" },
    { french: "après-midi", english: "afternoon", category: "time", pronunciation: "ah-preh-mee-dee" },
    { french: "soir", english: "evening", category: "time", pronunciation: "swahr" },
    { french: "nuit", english: "night", category: "time", pronunciation: "nwee" },
    { french: "minute", english: "minute", category: "time", pronunciation: "mee-noot" },
    { french: "heure", english: "hour", category: "time", pronunciation: "uhr" }
];

// Vocabulary related utility functions
export function filterVocabularyByCategory(category) {
    if (category === 'all') {
        return [...vocabulary];
    } else {
        return vocabulary.filter(word => word.category === category);
    }
}

export function searchVocabulary(searchTerm) {
    if (!searchTerm || searchTerm.trim() === '') {
        return [];
    }
    
    const term = searchTerm.trim().toLowerCase();
    return vocabulary.filter(word => 
        word.french.toLowerCase().includes(term) || 
        word.english.toLowerCase().includes(term) ||
        (word.pronunciation && word.pronunciation.toLowerCase().includes(term))
    );
}

// For working with user progress
export function saveVocabularyProgress(knownWords, unknownWords) {
    const progressData = {
        knownWords,
        unknownWords
    };
    localStorage.setItem('tcfVocabularyProgress', JSON.stringify(progressData));
}

export function loadVocabularyProgress() {
    const savedProgress = localStorage.getItem('tcfVocabularyProgress');
    if (savedProgress) {
        return JSON.parse(savedProgress);
    }
    return { knownWords: [], unknownWords: [] };
}

// Get word with pronunciation
export function getWordWithPronunciation(frenchWord) {
    return vocabulary.find(word => word.french.toLowerCase() === frenchWord.toLowerCase());
}

// Filter by pronunciation pattern
export function filterByPronunciation(pattern) {
    if (!pattern || pattern.trim() === '') {
        return [];
    }
    
    const term = pattern.trim().toLowerCase();
    return vocabulary.filter(word => 
        word.pronunciation.toLowerCase().includes(term)
    );
}

// Get vocabulary statistics
export function getVocabularyStats() {
    const categories = {};
    vocabulary.forEach(word => {
        if (!categories[word.category]) {
            categories[word.category] = 0;
        }
        categories[word.category]++;
    });
    
    return {
        totalWords: vocabulary.length,
        categoryCounts: categories
    };
}

// Get random word
export function getRandomWord(category = 'all') {
    const filteredVocab = filterVocabularyByCategory(category);
    const randomIndex = Math.floor(Math.random() * filteredVocab.length);
    return filteredVocab[randomIndex];
}

// Get words by difficulty level
export function getWordsByDifficulty(difficulty) {
    const difficultyMap = {
        'easy': ['basic', 'daily'],
        'medium': ['food', 'nature', 'travel', 'work', 'time', 'emotions'],
        'hard': ['intermediate', 'advanced']
    };
    
    if (!difficultyMap[difficulty]) {
        return [];
    }
    
    const categories = difficultyMap[difficulty];
    return vocabulary.filter(word => categories.includes(word.category));
}

// Get related words
export function getRelatedWords(word) {
    if (!word) return [];
    
    const targetWord = vocabulary.find(item => 
        item.french.toLowerCase() === word.toLowerCase() || 
        item.english.toLowerCase() === word.toLowerCase()
    );
    
    if (!targetWord) return [];
    
    // Get words from the same category
    return vocabulary.filter(item => 
        item.category === targetWord.category && 
        item.french !== targetWord.french
    ).slice(0, 10); // Return up to 10 related words
}

// Get vocabulary by first letter
export function getWordsByFirstLetter(letter, language = 'french') {
    if (!letter || letter.length === 0) return [];
    
    const firstChar = letter.trim().toLowerCase()[0];
    
    return vocabulary.filter(word => {
        const wordToCheck = language === 'french' ? word.french : word.english;
        return wordToCheck.toLowerCase().startsWith(firstChar);
    });
}

// Learn new words function - returns a set of words the user hasn't learned yet
export function getNewWordsToLearn(learnedWords = [], count = 10, category = 'all') {
    const filteredVocab = filterVocabularyByCategory(category);
    
    // Filter out words the user has already learned
    const newWords = filteredVocab.filter(word => 
        !learnedWords.includes(word.french)
    );
    
    // Shuffle array to get random words
    const shuffled = [...newWords].sort(() => 0.5 - Math.random());
    
    // Return requested number of words
    return shuffled.slice(0, count);
}

// Create a quiz from vocabulary
export function createVocabularyQuiz(category = 'all', count = 10) {
    const words = filterVocabularyByCategory(category);
    const shuffled = [...words].sort(() => 0.5 - Math.random());
    const quizWords = shuffled.slice(0, count);
    
    return quizWords.map(word => {
        // Create three wrong options
        const wrongOptions = words
            .filter(w => w.french !== word.french)
            .sort(() => 0.5 - Math.random())
            .slice(0, 3)
            .map(w => w.english);
            
        // Create options array with correct answer
        const options = [...wrongOptions, word.english].sort(() => 0.5 - Math.random());
        
        return {
            question: word.french,
            correctAnswer: word.english,
            options: options,
            pronunciation: word.pronunciation
        };
    });
}

// Export vocabulary by levels - for structured learning paths
export function getVocabularyByLevel(level) {
    const levels = {
        'beginner': ['basic', 'daily', 'food'],
        'intermediate': ['nature', 'travel', 'work', 'time', 'emotions'],
        'advanced': ['intermediate', 'advanced']
    };
    
    if (!levels[level]) return [];
    
    const categories = levels[level];
    return vocabulary.filter(word => categories.includes(word.category));
}

// Get conjugation examples (simplified, just for reference)
export function getConjugationExamples(verb) {
    // This is a simplified example - in a real app, you'd have a more complete conjugation database
    const commonVerbs = {
        'être': {
            present: ['je suis', 'tu es', 'il/elle est', 'nous sommes', 'vous êtes', 'ils/elles sont'],
            past: ['j\'étais', 'tu étais', 'il/elle était', 'nous étions', 'vous étiez', 'ils/elles étaient'],
            future: ['je serai', 'tu seras', 'il/elle sera', 'nous serons', 'vous serez', 'ils/elles seront']
        },
        'avoir': {
            present: ['j\'ai', 'tu as', 'il/elle a', 'nous avons', 'vous avez', 'ils/elles ont'],
            past: ['j\'avais', 'tu avais', 'il/elle avait', 'nous avions', 'vous aviez', 'ils/elles avaient'],
            future: ['j\'aurai', 'tu auras', 'il/elle aura', 'nous aurons', 'vous aurez', 'ils/elles auront']
        },
        'aller': {
            present: ['je vais', 'tu vas', 'il/elle va', 'nous allons', 'vous allez', 'ils/elles vont'],
            past: ['j\'allais', 'tu allais', 'il/elle allait', 'nous allions', 'vous alliez', 'ils/elles allaient'],
            future: ['j\'irai', 'tu iras', 'il/elle ira', 'nous irons', 'vous irez', 'ils/elles iront']
        },
        'parler': {
            present: ['je parle', 'tu parles', 'il/elle parle', 'nous parlons', 'vous parlez', 'ils/elles parlent'],
            past: ['je parlais', 'tu parlais', 'il/elle parlait', 'nous parlions', 'vous parliez', 'ils/elles parlaient'],
            future: ['je parlerai', 'tu parleras', 'il/elle parlera', 'nous parlerons', 'vous parlerez', 'ils/elles parleront']
        },
        'finir': {
            present: ['je finis', 'tu finis', 'il/elle finit', 'nous finissons', 'vous finissez', 'ils/elles finissent'],
            past: ['je finissais', 'tu finissais', 'il/elle finissait', 'nous finissions', 'vous finissiez', 'ils/elles finissaient'],
            future: ['je finirai', 'tu finiras', 'il/elle finira', 'nous finirons', 'vous finirez', 'ils/elles finiront']
        }
    };
    
    // Attempt to find the verb or return a "not found" response
    return commonVerbs[verb.toLowerCase()] || null;
}

// Export vocabulary progress data for the module status check
window.vocabLoaded = true;